<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 2015-05-20 
 | Rendered using Apache Maven Fluido Skin 1.4
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20150520" />
    <meta http-equiv="Content-Language" content="en" />
    <title>DBFlute Hamcrest &#x2013; Usage</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.4.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />

      
    <script type="text/javascript" src="./js/apache-maven-fluido-1.4.min.js"></script>

    
              <!-- Google Analytics -->
    <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-2069967-4']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();

    </script>
          </head>
        <body class="topBarDisabled">
          
    
    
            
    
        
    <a href="https://github.com/taktos/dbflute-hamcrest">
      <img style="position: absolute; top: 0; right: 0; border: 0; z-index: 10000;"
        src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png"
        alt="Fork me on GitHub">
    </a>
  
                
                    
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                <div id="bannerLeft">
                <h2>DBFlute Hamcrest</h2>
                </div>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
                    
                              <li class="">
                    <a href="http://dbflute.seasar.org" class="externalLink" title="DBFlute">
        DBFlute</a>
                    <span class="divider">/</span>
      </li>
        <li class="active ">Usage</li>
        
                
                    
                  <li id="publishDate" class="pull-right"><span class="divider">|</span> Last Published: 2015-05-20</li>
              <li id="projectVersion" class="pull-right">
                    Version: 2.0.1-SNAPSHOT
        </li>
            
                            </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span2">
          <div class="well sidebar-nav">
                
                    
                <ul class="nav nav-list">
                    <li class="nav-header">Overview</li>
                              
      <li>
  
                          <a href="index.html" title="Introduction">
          <span class="none"></span>
        Introduction</a>
            </li>
                
      <li class="active">
  
            <a href="#"><span class="none"></span>Usage</a>
          </li>
                
      <li>
  
                          <a href="v2/apidocs" title="API (version 2)">
          <span class="none"></span>
        API (version 2)</a>
            </li>
                
      <li>
  
                          <a href="v1/apidocs" title="API (version 1)">
          <span class="none"></span>
        API (version 1)</a>
            </li>
                              <li class="nav-header">Project Documentation</li>
                                                                                                                                                                                                              
      <li>
  
                          <a href="project-info.html" title="Project Information">
          <span class="icon-chevron-right"></span>
        Project Information</a>
                  </li>
                                                                  
      <li>
  
                          <a href="project-reports.html" title="Project Reports">
          <span class="icon-chevron-right"></span>
        Project Reports</a>
                  </li>
                              <li class="nav-header">Other languages</li>
                              
      <li>
  
                          <a href="ja/index.html" title="日本語">
          <span class="none"></span>
        日本語</a>
            </li>
            </ul>
                
                    
                            <form id="search-form" action="https://www.google.com/search" method="get" >
    
  <input value="taktos.github.io/dbflute-hamcrest" name="sitesearch" type="hidden"/>
  <input class="search-query" name="q" id="query" type="text" />
</form>
<script type="text/javascript" src="https://www.google.com/coop/cse/brand?form=search-form"></script>
          
          <hr />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
               
        
        
        <div id="twitter">
    
    <a href="https://twitter.com/taktos9" class="twitter-follow-button" data-show-count="true" data-align="left" data-size="medium" data-show-screen-name="true" data-lang="en">Follow taktos9</a>
    <script type="text/javascript">!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>

        </div>
                   <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span10" >
                                  
            <h1>Usage</h1>

<ul>
  
<li><a href="#cbmatchers">ConditionBean Matchers</a>
  
<ul>
    
<li><a href="#querymatcher">Assert query conditions</a></li>
    
<li><a href="#foreignquerymatcher">Assert query conditions on joined table</a></li>
    
<li><a href="#specifymatcher">Assert column should select</a></li>
    
<li><a href="#foreignspecifymatcher">Assert that should select columns of joind table</a></li>
  </ul></li>
  
<li><a href="#mockitohelpers">Mockito helpers</a>
  
<ul>
    
<li><a href="#argumentcaptor">Argument Captor</a></li>
    
<li><a href="#argumentmatcher">Argument Matcher</a></li>
  </ul></li>
  
<li><a href="#junithelpers">JUnit helpers</a></li>
</ul>
<div class="section">
<h2><a name="ConditionBean_Matchers"></a><a name="cbmatchers"></a>ConditionBean Matchers</h2>
<p>This library provides Matchers for query conditions (<tt>cb.query().setXXX</tt>) and for fetching column (<tt>cb.specify().columnXXX</tt>).</p>
<p>You can use these matchers by import statically <tt>org.dbflute.testing.DBFluteMatchers</tt>. Please refer to <a href="v2/apidocs/org/dbflute/testing/DBFluteMatchers.html">JavaDoc API</a> for complete list of APIs.</p>
<div class="section">
<h3><a name="Assert_query_conditions"></a><a name="querymatcher"></a>Assert query conditions</h3>
<p>These matchers are intended to use with <tt>assertThat</tt> method.</p>
<p>To test condition for column, use <tt>hasCondition</tt> with a operator matcher.</p>

<div class="source">
<div class="source"><pre class="prettyprint">assertThat(cb, hasCondition(&quot;memberName&quot;, equal(&quot;John Doe&quot;)));
</pre></div></div>
<p>The first argument (&#x201c;memberName&#x201d;) is a String of column name. This is a case-insensitive and accepting both camel case and snake case.</p>
<p>You can pass any Matcher instance to the operator matcher (<tt>equal(...) in above</tt>).</p>

<div class="source">
<div class="source"><pre class="prettyprint">assertThat(cb, hasCondition(&quot;memberName&quot;, equal(startsWith(&quot;John&quot;))));
</pre></div></div></div>
<div class="section">
<h3><a name="Assert_query_conditions_on_joined_table"></a><a name="foreignquerymatcher"></a>Assert query conditions on joined table</h3>

<div class="source">
<div class="source"><pre class="prettyprint">cb.query().queryMemberStatus().setMemberStatusName_NotEqual(&quot;DEL&quot;);
cb.query().queryMemberServiceAsOne().queryServiceRank().setRankName_Equal(&quot;VIP&quot;);

assertThat(cb, hasRelation(&quot;memberStatus&quot;, hasCondition(&quot;memberName&quot;, notEqual(&quot;DEL&quot;))));
assertThat(cb, hasRelation(&quot;memberService.serviceRank&quot;, hasCondition(&quot;rankName&quot;, equal(&quot;ACT&quot;))));
</pre></div></div></div>
<div class="section">
<h3><a name="Assert_column_should_select"></a><a name="specifymatcher"></a>Assert column should select</h3>

<div class="source">
<div class="source"><pre class="prettyprint">cb.specify().columnMemberName();
assertThat(cb, shouldSelect(&quot;memberName&quot;));
</pre></div></div></div>
<div class="section">
<h3><a name="Assert_that_should_select_columns_of_joind_table"></a><a name="foreignspecifymatcher"></a>Assert that should select columns of joind table</h3>

<div class="source">
<div class="source"><pre class="prettyprint">cb.specify().specifyMemberStatus().columnMemberStatusName();
cb.specify().specifyMemberServiceAsOne().specifyServiceRank().columnServiceRankName();

assertThat(cb, shouldSelect(&quot;memberStatus.memberStatusName&quot;));
assertThat(cb, shouldSelect(&quot;memberService.serviceRank.serviceRankName&quot;));
</pre></div></div></div></div>
<div class="section">
<h2><a name="Mockito_helpers"></a><a name="mockitohelpers"></a>Mockito helpers</h2>
<div class="section">
<h3><a name="Argument_Captor"></a><a name="argumentcaptor"></a>Argument Captor</h3>

<div class="source">
<div class="source"><pre class="prettyprint">bhv.selectEntity(cb -&gt; cb.query().setMemberId_Equal(1));

BehaviorArgumentCaptor&lt;MemberCB&gt; captor = captor(MemberCB.class);
verify(bhv).selectEntity(captor.capture());

MemberCB cb = captor.getCB();
assertThat(cb, hasCondition(&quot;memberId&quot;, equal(1)));
</pre></div></div></div>
<div class="section">
<h3><a name="Argument_Matcher"></a><a name="argumentmatcher"></a>Argument Matcher</h3>

<div class="source">
<div class="source"><pre class="prettyprint">when(bhv.selectEntity(argCB(MemberCB.class, hasCondition(&quot;memberId&quot;, equal(1))))).thenReturn(fixture);

verify(mockBhv).selectEntity(argCB(MemberCB.class, hasCondition(&quot;memberId&quot;, equal(1))));
</pre></div></div></div></div>
<div class="section">
<h2><a name="JUnit_helpers"></a><a name="junithelpers"></a>JUnit helpers</h2>
<div class="section">
<h3><a name="AccessContextInitializer"></a><a href="v2/apidocs/org/dbflute/testing/rule/AccessContextInitializer.html">AccessContextInitializer</a></h3>

<div class="source">
<div class="source"><pre class="prettyprint">public class FooTest {
    @Rule
    public AccessContextInitializer ac = new AccessContextInitializer(&quot;foo&quot;);

    @AutoWired
    MemberBhv bhv;

    @Test
    public void insert() {
        Member m = new Member();
        m.setMemberName(&quot;John Doe&quot;);
        bhv.insert(m);
        assertThat(m.getRegisterUser(), is(&quot;foo&quot;));
    }
}
</pre></div></div></div>
<div class="section">
<h3><a name="JUnit_Category"></a>JUnit Category</h3>
<p><a href="v2/apidocs/org/dbflute/testing/category/DatabaseTests.html">@DatabaseTests</a> is a JUnit @Category annotation. Please refer to JUnit wiki for details of categories.</p>

<blockquote>
<p><a class="externalLink" href="https://github.com/junit-team/junit/wiki/Categories">https://github.com/junit-team/junit/wiki/Categories</a></p>
</blockquote>

<div class="source">
<div class="source"><pre class="prettyprint">&lt;plugin&gt;
	&lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;
	&lt;configuration&gt;
		&lt;excludedGroups&gt;org.dbflute.testing.category.DatabaseTests&lt;/excludedGroups&gt;
	&lt;/configuration&gt;
&lt;/plugin&gt;
</pre></div></div></div></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
                      <div class="row-fluid">
                                      <p >Copyright &copy;                    2015
                        <a href="http://dbflute.org">The DBFlute Project</a>.
            All rights reserved.      
                    
      </p>
                </div>

        
                </div>
    </footer>
        </body>
</html>
